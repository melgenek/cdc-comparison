<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Column filters</title>

    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" type="text/javascript"></script>
</head>
<body>
<table class="table">
    <thead>
    <tr>
        <th>Name</th>
        <th>Chunk Sizes</th>
        <th>Dedup ratio</th>
        <th>Chunk count</th>
        <th>Chunk sizes</th>
        <th>Min chunk size</th>
        <th>Max chunk size</th>
        <th>Interval count</th>
        <th>Interval sizes</th>
        <th>Min interval size</th>
        <th>Max interval size</th>
    </tr>
    </thead>
    <tbody>

    </tbody>
</table>

<script>
    const dt = new simpleDatatables.DataTable("table", {
        perPage: 20,
        searchable: true,
        columns: [],
        tableRender: (_data, table, type) => {
            if (type === "print") {
                return table
            }
            const tHead = table.childNodes[0]
            const filterHeaders = {
                nodeName: "TR",
                childNodes: tHead.childNodes[0].childNodes.map(
                    (_th, index) => ({
                        nodeName: "TH",
                        childNodes: [
                            {
                                nodeName: "INPUT",
                                attributes: {
                                    class: "datatable-input",
                                    type: "search",
                                    "data-columns": `[${index}]`
                                }
                            }
                        ]
                    })
                )
            }
            tHead.childNodes.push(filterHeaders)
            return table
        }
    })

    async function load() {
        const json = await (await fetch('../json/merged.json')).json();
        for (const result of json.results) {
            dt.rows.add([
                result.name,
                result.chunkSizes,
                result.dedupRatio,
                result.resultChunkCount,
                result.resultChunkSizes,
                result.minChunkSize,
                result.maxChunkSize,
                result.intervalCount,
                result.intervalSizes,
                result.minIntervalSize,
                result.maxIntervalSize,
            ]);
        }
    }

    load();

</script>
</body>
</html>
